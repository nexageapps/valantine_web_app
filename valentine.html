<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description" content="Send a playful Valentine's Day message to someone special">
  <title>Will You Be My Valentine? ðŸ’•</title>
  
  <style>
    /* ===================================
       CSS RESET & BASE STYLES
       =================================== */
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    /* ===================================
       CSS VARIABLES
       =================================== */
    
    :root {
      /* Romantic Color Palette - Cute but Classy */
      --color-primary: #ff6b9d;        /* Soft pink */
      --color-secondary: #c44569;      /* Deep rose */
      --color-accent: #ffa07a;         /* Light coral */
      --color-background: #fff5f7;     /* Very light pink */
      --color-text-dark: #2d3436;      /* Charcoal */
      --color-text-light: #636e72;     /* Gray */
      --color-white: #ffffff;
      --color-error: #d63031;          /* Red for errors */
      --color-success: #00b894;        /* Green for success */
      
      /* Typography */
      --font-primary: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      --font-display: Georgia, 'Times New Roman', serif;
      
      /* Font Sizes - Mobile First */
      --font-size-small: 0.875rem;     /* 14px */
      --font-size-base: 1rem;          /* 16px */
      --font-size-medium: 1.25rem;     /* 20px */
      --font-size-large: 1.75rem;      /* 28px */
      --font-size-xlarge: 2.5rem;      /* 40px */
      --font-size-display: 3.5rem;     /* 56px */
      
      /* Spacing */
      --spacing-xs: 0.5rem;            /* 8px */
      --spacing-sm: 1rem;              /* 16px */
      --spacing-md: 1.5rem;            /* 24px */
      --spacing-lg: 2rem;              /* 32px */
      --spacing-xl: 3rem;              /* 48px */
      
      /* Border Radius */
      --radius-sm: 0.5rem;
      --radius-md: 1rem;
      --radius-lg: 1.5rem;
      
      /* Shadows */
      --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.1);
      --shadow-md: 0 4px 16px rgba(0, 0, 0, 0.15);
      --shadow-lg: 0 8px 24px rgba(0, 0, 0, 0.2);
      
      /* Transitions */
      --transition-fast: 0.2s ease;
      --transition-normal: 0.3s ease;
      --transition-slow: 0.5s ease;
    }
    
    /* ===================================
       BASE TYPOGRAPHY
       =================================== */
    
    body {
      font-family: var(--font-primary);
      font-size: var(--font-size-base);
      line-height: 1.6;
      color: var(--color-text-dark);
      background-color: var(--color-background);
      min-height: 100vh;
      overflow-x: hidden;
    }
    
    h1, h2, h3 {
      font-family: var(--font-display);
      font-weight: 600;
      line-height: 1.2;
      color: var(--color-secondary);
    }
    
    h1 {
      font-size: var(--font-size-xlarge);
      margin-bottom: var(--spacing-md);
    }
    
    h2 {
      font-size: var(--font-size-large);
      margin-bottom: var(--spacing-sm);
    }
    
    p {
      margin-bottom: var(--spacing-sm);
    }
    
    /* ===================================
       SCREEN STRUCTURE
       =================================== */
    
    .screen {
      display: none;
      min-height: 100vh;
      padding: var(--spacing-lg);
      justify-content: center;
      align-items: center;
      flex-direction: column;
      text-align: center;
    }
    
    .screen.active {
      display: flex;
    }
    
    /* ===================================
       INPUT SCREEN
       =================================== */
    
    #input-screen {
      background: linear-gradient(135deg, var(--color-background) 0%, #ffe5ec 100%);
    }
    
    #input-screen .container {
      max-width: 500px;
    }
    
    #input-screen h1 {
      margin-bottom: var(--spacing-lg);
    }
    
    /* ===================================
       FORM STYLES
       =================================== */
    
    #valentine-form {
      width: 100%;
      display: flex;
      flex-direction: column;
      gap: var(--spacing-md);
    }
    
    .form-group {
      display: flex;
      flex-direction: column;
      text-align: left;
    }
    
    .form-label {
      font-size: var(--font-size-small);
      font-weight: 600;
      color: var(--color-text-dark);
      margin-bottom: var(--spacing-xs);
    }
    
    .form-input,
    .form-textarea {
      width: 100%;
      padding: var(--spacing-sm);
      font-family: var(--font-primary);
      font-size: var(--font-size-base);
      color: var(--color-text-dark);
      background-color: var(--color-white);
      border: 2px solid transparent;
      border-radius: var(--radius-sm);
      outline: none;
      transition: all var(--transition-normal);
      box-shadow: var(--shadow-sm);
      touch-action: manipulation; /* Optimize touch interactions */
    }
    
    .form-input:focus,
    .form-textarea:focus {
      border-color: var(--color-primary);
      box-shadow: var(--shadow-md);
      transform: translateY(-2px);
      outline: 2px solid var(--color-primary);
      outline-offset: 2px;
    }
    
    .form-input::placeholder,
    .form-textarea::placeholder {
      color: var(--color-text-light);
      opacity: 0.7;
    }
    
    .form-textarea {
      min-height: 100px;
      resize: vertical;
    }
    
    /* Error States */
    .form-group.error .form-input {
      border-color: var(--color-error);
    }
    
    .error-message {
      display: none;
      font-size: var(--font-size-small);
      color: var(--color-error);
      margin-top: var(--spacing-xs);
    }
    
    .form-group.error .error-message {
      display: block;
    }
    
    /* ===================================
       BUTTON STYLES
       =================================== */
    
    .btn {
      padding: var(--spacing-sm) var(--spacing-lg);
      font-family: var(--font-primary);
      font-size: var(--font-size-base);
      font-weight: 600;
      color: var(--color-white);
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
      border: none;
      border-radius: var(--radius-md);
      cursor: pointer;
      outline: none;
      transition: all var(--transition-normal);
      box-shadow: var(--shadow-md);
      min-height: 44px; /* Touch-friendly minimum */
      touch-action: manipulation; /* Optimize touch interactions, remove double-tap delay */
      -webkit-tap-highlight-color: rgba(255, 107, 157, 0.3); /* Touch feedback on iOS */
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: var(--shadow-lg);
    }
    
    .btn:active {
      transform: translateY(-1px);
      box-shadow: var(--shadow-sm);
    }
    
    .btn:focus {
      outline: 3px solid var(--color-primary);
      outline-offset: 3px;
    }
    
    .btn:disabled {
      opacity: 0.6;
      cursor: not-allowed;
      transform: none;
    }
    
    .btn-primary {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
    }
    
    /* Tablet button styles */
    @media (min-width: 481px) {
      .btn {
        padding: calc(var(--spacing-sm) + 2px) var(--spacing-xl);
        font-size: 1.125rem;
      }
    }
    
    /* Desktop button styles */
    @media (min-width: 1025px) {
      .btn {
        padding: var(--spacing-md) calc(var(--spacing-xl) + var(--spacing-sm));
        font-size: 1.25rem;
      }
    }
    
    /* ===================================
       COUNTDOWN SCREEN
       =================================== */
    
    #countdown-screen {
      background: linear-gradient(135deg, #ffe5ec 0%, #ffd4e5 100%);
    }
    
    #countdown-number {
      font-family: var(--font-display);
      font-size: 8rem;
      font-weight: 700;
      color: var(--color-secondary);
      text-shadow: 0 4px 20px rgba(196, 69, 105, 0.3);
      animation: countdown-pulse 1s ease-in-out;
    }
    
    /* Countdown animation with scale and fade effects */
    @keyframes countdown-pulse {
      0% {
        transform: scale(0.5);
        opacity: 0;
      }
      50% {
        transform: scale(1.2);
        opacity: 1;
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    /* Tablet countdown styles */
    @media (min-width: 481px) {
      #countdown-number {
        font-size: 12rem;
      }
    }
    
    /* Desktop countdown styles */
    @media (min-width: 1025px) {
      #countdown-number {
        font-size: 16rem;
      }
    }
    
    /* ===================================
       REVEAL SCREEN
       =================================== */
    
    #reveal-screen {
      background: linear-gradient(135deg, #ffd4e5 0%, #ffc2d9 100%);
      position: relative;
    }
    
    #message-container {
      max-width: 600px;
      padding: var(--spacing-lg);
      text-align: center;
      z-index: 10;
      position: relative;
    }
    
    #recipient-name {
      font-family: var(--font-display);
      font-size: var(--font-size-xlarge);
      font-weight: 700;
      color: var(--color-secondary);
      margin-bottom: var(--spacing-md);
      text-shadow: 0 2px 10px rgba(196, 69, 105, 0.2);
    }
    
    #valentine-message {
      font-family: var(--font-primary);
      font-size: var(--font-size-medium);
      line-height: 1.8;
      color: var(--color-text-dark);
      margin-bottom: var(--spacing-lg);
      min-height: 3em;
    }
    
    /* Tablet reveal screen styles */
    @media (min-width: 481px) {
      #message-container {
        padding: var(--spacing-xl);
      }
      
      #recipient-name {
        font-size: 4rem;
      }
      
      #valentine-message {
        font-size: 1.5rem;
      }
    }
    
    /* Desktop reveal screen styles */
    @media (min-width: 1025px) {
      #message-container {
        max-width: 800px;
      }
      
      #recipient-name {
        font-size: 5rem;
      }
      
      #valentine-message {
        font-size: 1.75rem;
      }
    }
    
    /* ===================================
       QUESTION SECTION
       =================================== */
    
    #question-section {
      margin-top: var(--spacing-xl);
      padding-top: var(--spacing-lg);
    }
    
    .question-text {
      font-family: var(--font-display);
      font-size: var(--font-size-large);
      color: var(--color-secondary);
      margin-bottom: var(--spacing-lg);
      text-shadow: 0 2px 8px rgba(196, 69, 105, 0.15);
    }
    
    #button-container {
      display: flex;
      gap: var(--spacing-md);
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
    }
    
    /* Yes Button - Romantic gradient */
    .btn-yes {
      background: linear-gradient(135deg, var(--color-primary) 0%, var(--color-secondary) 100%);
      font-size: var(--font-size-medium);
      padding: var(--spacing-md) var(--spacing-xl);
      min-width: 140px;
    }
    
    .btn-yes:hover {
      transform: translateY(-4px) scale(1.05);
      box-shadow: 0 8px 30px rgba(255, 107, 157, 0.4);
    }
    
    /* No Button - Subtle styling */
    .btn-no {
      background: linear-gradient(135deg, var(--color-text-light) 0%, #95a5a6 100%);
      font-size: var(--font-size-base);
      padding: var(--spacing-sm) var(--spacing-lg);
      min-width: 100px;
      position: relative;
      transition: all var(--transition-fast);
      touch-action: manipulation; /* Optimize touch interactions */
    }
    
    .btn-no:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-md);
    }
    
    /* Tablet question section styles */
    @media (min-width: 481px) {
      .question-text {
        font-size: 2.5rem;
      }
      
      #button-container {
        gap: var(--spacing-lg);
      }
      
      .btn-yes {
        font-size: 1.5rem;
        padding: var(--spacing-md) calc(var(--spacing-xl) + var(--spacing-sm));
        min-width: 180px;
      }
      
      .btn-no {
        font-size: 1.125rem;
        padding: var(--spacing-sm) var(--spacing-xl);
        min-width: 120px;
      }
    }
    
    /* Desktop question section styles */
    @media (min-width: 1025px) {
      .question-text {
        font-size: 3rem;
      }
      
      .btn-yes {
        font-size: 1.75rem;
        min-width: 200px;
      }
      
      .btn-no {
        font-size: 1.25rem;
        min-width: 140px;
      }
    }
    
    /* ===================================
       SUCCESS SECTION
       =================================== */
    
    #success-section {
      margin-top: var(--spacing-xl);
      padding-top: var(--spacing-lg);
      animation: success-appear 0.5s ease-out;
    }
    
    .success-message {
      font-family: var(--font-display);
      font-size: var(--font-size-large);
      color: var(--color-success);
      margin-bottom: var(--spacing-md);
      text-shadow: 0 2px 8px rgba(0, 184, 148, 0.2);
    }
    
    .success-text {
      font-size: var(--font-size-medium);
      color: var(--color-text-dark);
      margin-bottom: var(--spacing-lg);
    }
    
    @keyframes success-appear {
      0% {
        transform: scale(0.8);
        opacity: 0;
      }
      50% {
        transform: scale(1.1);
      }
      100% {
        transform: scale(1);
        opacity: 1;
      }
    }
    
    /* Tablet success section styles */
    @media (min-width: 481px) {
      .success-message {
        font-size: 2.5rem;
      }
      
      .success-text {
        font-size: 1.5rem;
      }
    }
    
    /* Desktop success section styles */
    @media (min-width: 1025px) {
      .success-message {
        font-size: 3rem;
      }
      
      .success-text {
        font-size: 1.75rem;
      }
    }
    
    /* ===================================
       SHARE SECTION
       =================================== */
    
    #share-section {
      margin-top: var(--spacing-lg);
    }
    
    .share-buttons {
      display: flex;
      gap: var(--spacing-md);
      justify-content: center;
      align-items: center;
      flex-wrap: wrap;
      margin-bottom: var(--spacing-md);
    }
    
    .btn-share {
      background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
      font-size: var(--font-size-base);
      padding: var(--spacing-sm) var(--spacing-lg);
      min-width: 160px;
    }
    
    .btn-share:hover {
      transform: translateY(-3px) scale(1.02);
      box-shadow: 0 6px 20px rgba(0, 184, 148, 0.3);
    }
    
    #copy-confirmation {
      font-size: var(--font-size-small);
      color: var(--color-success);
      font-weight: 600;
      padding: var(--spacing-xs);
      animation: fade-in-out 2s ease-in-out;
    }
    
    @keyframes fade-in-out {
      0%, 100% {
        opacity: 0;
      }
      10%, 90% {
        opacity: 1;
      }
    }
    
    /* Tablet share section styles */
    @media (min-width: 481px) {
      .share-buttons {
        gap: var(--spacing-lg);
      }
      
      .btn-share {
        font-size: 1.125rem;
        padding: var(--spacing-sm) var(--spacing-xl);
        min-width: 200px;
      }
      
      #copy-confirmation {
        font-size: var(--font-size-base);
      }
    }
    
    /* Desktop share section styles */
    @media (min-width: 1025px) {
      .btn-share {
        font-size: 1.25rem;
        min-width: 220px;
      }
    }
    
    /* ===================================
       RESPONSIVE LAYOUT - MOBILE FIRST
       =================================== */
    
    /* Base styles for mobile (320px+) */
    /* All base styles above are optimized for mobile devices */
    .container {
      width: 100%;
      max-width: 100%;
      padding: var(--spacing-sm);
    }
    
    /* Ensure minimum touch target size on mobile */
    @media (max-width: 480px) {
      .btn,
      .btn-yes,
      .btn-no,
      .btn-share {
        min-height: 44px;
        min-width: 44px;
      }
      
      /* Adjust input fields for mobile */
      .form-input,
      .form-textarea {
        font-size: 16px; /* Prevents zoom on iOS */
        padding: 12px;
      }
      
      /* Reduce spacing on very small screens */
      .screen {
        padding: var(--spacing-md);
      }
      
      /* Adjust floating hearts size for mobile */
      .floating-heart {
        font-size: 1.5rem;
      }
    }
    
    /* Tablet styles (481px+) */
    @media (min-width: 481px) {
      :root {
        --font-size-small: 1rem;         /* 16px */
        --font-size-base: 1.125rem;      /* 18px */
        --font-size-medium: 1.5rem;      /* 24px */
        --font-size-large: 2rem;         /* 32px */
        --font-size-xlarge: 3rem;        /* 48px */
        --font-size-display: 4.5rem;     /* 72px */
        --spacing-sm: 1.25rem;           /* 20px */
        --spacing-md: 2rem;              /* 32px */
        --spacing-lg: 2.5rem;            /* 40px */
        --spacing-xl: 4rem;              /* 64px */
      }
      
      .container {
        max-width: 600px;
        padding: var(--spacing-md);
      }
      
      .screen {
        padding: var(--spacing-xl);
      }
      
      /* Increase form element sizes */
      .form-input,
      .form-textarea {
        padding: var(--spacing-md);
        font-size: var(--font-size-base);
      }
      
      /* Adjust floating hearts size for tablet */
      .floating-heart {
        font-size: 2.5rem;
      }
      
      /* Adjust confetti size for tablet */
      .confetti {
        width: 12px;
        height: 12px;
      }
    }
    
    /* Desktop styles (1025px+) */
    @media (min-width: 1025px) {
      :root {
        --font-size-small: 1rem;         /* 16px */
        --font-size-base: 1.25rem;       /* 20px */
        --font-size-medium: 1.75rem;     /* 28px */
        --font-size-large: 2.25rem;      /* 36px */
        --font-size-xlarge: 3.5rem;      /* 56px */
        --font-size-display: 5rem;       /* 80px */
        --spacing-md: 2.5rem;            /* 40px */
        --spacing-lg: 3rem;              /* 48px */
        --spacing-xl: 5rem;              /* 80px */
      }
      
      .container {
        max-width: 800px;
        padding: var(--spacing-lg);
      }
      
      .screen {
        padding: calc(var(--spacing-xl) + var(--spacing-lg));
      }
      
      /* Increase form element sizes for desktop */
      .form-input,
      .form-textarea {
        padding: var(--spacing-md);
        font-size: var(--font-size-base);
      }
      
      /* Adjust floating hearts size for desktop */
      .floating-heart {
        font-size: 3rem;
      }
      
      /* Adjust confetti size for desktop */
      .confetti {
        width: 14px;
        height: 14px;
      }
      
      /* Add hover effects for desktop (not on touch devices) */
      @media (hover: hover) {
        .btn:hover {
          transform: translateY(-4px);
        }
        
        .form-input:hover,
        .form-textarea:hover {
          border-color: var(--color-primary);
        }
      }
    }
    
    /* ===================================
       FLOATING HEARTS ANIMATION
       =================================== */
    
    .floating-heart {
      position: fixed;
      font-size: 2rem;
      pointer-events: none;
      z-index: 5;
      animation: float-up 4s ease-in forwards;
      will-change: transform, opacity;
    }
    
    /* Heart floats upward and fades out */
    @keyframes float-up {
      0% {
        transform: translateY(0) scale(0.5);
        opacity: 0;
      }
      10% {
        opacity: 1;
      }
      100% {
        transform: translateY(-100vh) scale(1);
        opacity: 0;
      }
    }
    
    /* ===================================
       CONFETTI ANIMATION
       =================================== */
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      pointer-events: none;
      z-index: 5;
      animation: confetti-fall 3s ease-in forwards;
      will-change: transform, opacity;
    }
    
    /* Confetti falls from top with rotation */
    @keyframes confetti-fall {
      0% {
        transform: translateY(-10px) rotate(0deg);
        opacity: 1;
      }
      100% {
        transform: translateY(100vh) rotate(720deg);
        opacity: 0;
      }
    }
    
    /* ===================================
       ACCESSIBILITY - REDUCED MOTION
       =================================== */
    
    /* Respect user's motion preferences for accessibility */
    @media (prefers-reduced-motion: reduce) {
      /* Disable all animations and transitions */
      *,
      *::before,
      *::after {
        animation-duration: 0.01ms !important;
        animation-iteration-count: 1 !important;
        transition-duration: 0.01ms !important;
        scroll-behavior: auto !important;
      }
      
      /* Remove transform animations */
      .btn:hover,
      .btn:active,
      .form-input:focus,
      .form-textarea:focus {
        transform: none !important;
      }
      
      /* Simplify countdown animation */
      #countdown-number {
        animation: none !important;
      }
      
      /* Disable floating hearts and confetti animations */
      .floating-heart,
      .confetti {
        animation: none !important;
        display: none !important;
      }
      
      /* Simplify success section animation */
      #success-section {
        animation: none !important;
      }
      
      /* Simplify copy confirmation animation */
      #copy-confirmation {
        animation: none !important;
      }
    }
    
    /* ===================================
       UTILITY CLASSES
       =================================== */
    
    .hidden {
      display: none !important;
    }
    
    .text-center {
      text-align: center;
    }
    
    .mt-sm { margin-top: var(--spacing-sm); }
    .mt-md { margin-top: var(--spacing-md); }
    .mt-lg { margin-top: var(--spacing-lg); }
    
    .mb-sm { margin-bottom: var(--spacing-sm); }
    .mb-md { margin-bottom: var(--spacing-md); }
    .mb-lg { margin-bottom: var(--spacing-lg); }
  </style>
</head>
<body>
  
  <!-- ===================================
       INPUT SCREEN
       =================================== -->
  <div id="input-screen" class="screen active" role="main" aria-label="Create Valentine message">
    <div class="container">
      <h1>ðŸ’• Create Your Valentine ðŸ’•</h1>
      <p class="mb-lg" style="color: var(--color-text-light);">
        Send a playful Valentine's Day message to someone special
      </p>
      
      <form id="valentine-form" aria-label="Valentine message form">
        <div class="form-group" id="name-group">
          <label for="name-input" class="form-label">Their Name *</label>
          <input 
            type="text" 
            id="name-input" 
            class="form-input"
            placeholder="Enter their name"
            required
            autocomplete="off"
            aria-required="true"
            aria-describedby="name-error"
          >
          <span class="error-message" id="name-error" role="alert">Please enter a name</span>
        </div>
        
        <div class="form-group">
          <label for="message-input" class="form-label">Custom Message (Optional)</label>
          <textarea 
            id="message-input" 
            class="form-textarea"
            placeholder="Add a personal message... or leave blank for a surprise!"
            autocomplete="off"
            aria-label="Custom Valentine message"
          ></textarea>
        </div>
        
        <div style="display: flex; gap: var(--spacing-md); flex-wrap: wrap;">
          <button type="button" id="generate-link-btn" class="btn btn-primary" style="flex: 1; min-width: 200px;" aria-label="Generate shareable link">
            ðŸ“‹ Generate Link
          </button>
          <button type="submit" class="btn btn-primary" style="flex: 1; min-width: 200px; background: linear-gradient(135deg, #c44569 0%, #8e2c4a 100%);" aria-label="Preview Valentine message">
            ðŸ‘€ Preview First
          </button>
        </div>
      </form>
      
      <!-- Link Generation Section -->
      <div id="link-section" class="hidden" style="margin-top: var(--spacing-lg); padding: var(--spacing-lg); background: var(--color-white); border-radius: var(--radius-md); box-shadow: var(--shadow-md);" role="region" aria-label="Generated link section">
        <h3 style="color: var(--color-secondary); margin-bottom: var(--spacing-md);">âœ¨ Your Valentine Link is Ready!</h3>
        <p style="color: var(--color-text-light); margin-bottom: var(--spacing-md); font-size: var(--font-size-small);">
          Share this link with your special someone:
        </p>
        <div style="display: flex; gap: var(--spacing-sm); margin-bottom: var(--spacing-md); flex-wrap: wrap;">
          <input 
            type="text" 
            id="generated-link" 
            readonly 
            class="form-input" 
            style="flex: 1; min-width: 200px; font-size: var(--font-size-small); cursor: pointer;"
            onclick="this.select()"
            aria-label="Generated Valentine link"
          >
        </div>
        <div style="display: flex; gap: var(--spacing-sm); flex-wrap: wrap;">
          <button id="copy-generated-link-btn" class="btn btn-share" style="flex: 1; min-width: 150px;" aria-label="Copy link to clipboard">
            ðŸ“‹ Copy Link
          </button>
          <button id="whatsapp-generated-btn" class="btn btn-share" style="flex: 1; min-width: 150px;" aria-label="Share link on WhatsApp">
            ðŸ’¬ WhatsApp
          </button>
        </div>
        <div id="copy-generated-confirmation" class="hidden" style="margin-top: var(--spacing-sm); color: var(--color-success); font-weight: 600; text-align: center;" role="status" aria-live="polite">
          âœ“ Link copied to clipboard!
        </div>
      </div>
    </div>
  </div>
  
  <!-- ===================================
       COUNTDOWN SCREEN
       =================================== -->
  <div id="countdown-screen" class="screen" role="main" aria-label="Countdown animation">
    <div class="container">
      <div id="countdown-number" aria-live="polite" aria-atomic="true">3</div>
    </div>
  </div>
  
  <!-- ===================================
       REVEAL SCREEN
       =================================== -->
  <div id="reveal-screen" class="screen" role="main" aria-label="Valentine message reveal">
    <div id="message-container">
      <h1 id="recipient-name" aria-live="polite"></h1>
      <p id="valentine-message" aria-live="polite" aria-atomic="true"></p>
      
      <!-- Question Section -->
      <div id="question-section" class="hidden" role="region" aria-label="Valentine question">
        <h2 class="question-text">Will you be my Valentine?</h2>
        <div id="button-container">
          <button id="yes-btn" class="btn btn-yes" aria-label="Yes, I will be your Valentine">Yes! ðŸ’•</button>
          <button id="no-btn" class="btn btn-no" aria-label="No, I will not be your Valentine">No</button>
        </div>
      </div>
      
      <!-- Success Message Section -->
      <div id="success-section" class="hidden" role="status" aria-live="polite">
        <h2 class="success-message">ðŸŽ‰ Yay! You said Yes! ðŸŽ‰</h2>
        <p class="success-text">Share this special moment with them!</p>
      </div>
      
      <!-- Share Options Section -->
      <div id="share-section" class="hidden" role="region" aria-label="Share options">
        <div class="share-buttons">
          <button id="copy-link-btn" class="btn btn-share" aria-label="Copy Valentine link to clipboard">ðŸ“‹ Copy Link</button>
          <button id="whatsapp-btn" class="btn btn-share" aria-label="Share Valentine link on WhatsApp">ðŸ’¬ Share on WhatsApp</button>
        </div>
        <div id="copy-confirmation" class="hidden" role="status" aria-live="polite">âœ“ Link copied to clipboard!</div>
      </div>
    </div>
  </div>
  
  <script>
    // ===================================
    // APPLICATION STATE
    // ===================================
    
    // Store the recipient's name and custom message for use throughout the app
    let recipientName = '';
    let customMessage = '';
    
    // ===================================
    // UTILITY FUNCTIONS
    // ===================================
    
    /**
     * Validates that the name input is not empty or whitespace-only
     * @param {string} name - The name to validate
     * @returns {boolean} - True if valid, false if empty/whitespace-only
     */
    function validateNameInput(name) {
      // Trim whitespace and check if the result is non-empty
      return name.trim().length > 0;
    }
    
    /**
     * Sanitizes user input to prevent XSS attacks
     * Limits length and removes potentially dangerous characters
     * @param {string} input - The user input to sanitize
     * @param {number} maxLength - Maximum allowed length
     * @returns {string} - Sanitized input
     */
    function sanitizeInput(input, maxLength) {
      if (!input) return '';
      
      // Trim whitespace
      let sanitized = input.trim();
      
      // Limit length to prevent URL parameter overflow
      if (sanitized.length > maxLength) {
        sanitized = sanitized.substring(0, maxLength);
      }
      
      // Return sanitized input
      // Note: We use textContent for display, which automatically escapes HTML
      return sanitized;
    }
    
    /**
     * Validates URL parameter length limits
     * @param {string} name - The recipient's name
     * @param {string} message - The custom message
     * @returns {boolean} - True if within limits, false otherwise
     */
    function validateParameterLengths(name, message) {
      const MAX_NAME_LENGTH = 200;
      const MAX_MESSAGE_LENGTH = 500;
      
      return name.length <= MAX_NAME_LENGTH && message.length <= MAX_MESSAGE_LENGTH;
    }
    
    /**
     * Detects if touch events are supported
     * @returns {boolean} - True if touch events are supported
     */
    function isTouchSupported() {
      return ('ontouchstart' in window) || 
             (navigator.maxTouchPoints > 0) || 
             (navigator.msMaxTouchPoints > 0);
    }
    
    /**
     * Detects if Clipboard API is supported
     * @returns {boolean} - True if Clipboard API is supported
     */
    function isClipboardSupported() {
      return !!(navigator.clipboard && navigator.clipboard.writeText);
    }
    
    /**
     * Generates a shareable URL with encoded query parameters
     * @param {string} name - The recipient's name
     * @param {string} message - The custom message (can be empty)
     * @returns {string} - The complete shareable URL with query parameters
     */
    function generateShareURL(name, message) {
      // Get the current page URL (base URL without query parameters or hash)
      // Split by '?' to remove any existing query parameters
      // Split by '#' to remove any hash fragments
      const currentURL = window.location.href.split('?')[0].split('#')[0];
      
      // Use URLSearchParams API for proper encoding of special characters
      const params = new URLSearchParams();
      params.set('name', name);
      
      // Only add message parameter if it's not empty
      if (message && message.trim().length > 0) {
        params.set('msg', message);
      }
      
      // Construct and return the full URL with query parameters
      return `${currentURL}?${params.toString()}`;
    }
    
    /**
     * Parses URL query parameters to extract name and message
     * @returns {Object} - Object with name and message properties (both strings, empty if not present)
     */
    function parseURLParams() {
      // Get the query string from the current URL
      const queryString = window.location.search;
      
      // Use URLSearchParams API for proper decoding of special characters
      const params = new URLSearchParams(queryString);
      
      // Extract name and message parameters
      // Use empty string as default if parameter is not present
      let name = params.get('name') || '';
      let message = params.get('msg') || '';
      
      // Sanitize and validate parameter lengths to prevent abuse
      const MAX_NAME_LENGTH = 200;
      const MAX_MESSAGE_LENGTH = 500;
      
      name = sanitizeInput(name, MAX_NAME_LENGTH);
      message = sanitizeInput(message, MAX_MESSAGE_LENGTH);
      
      // Return object with name and message properties
      return {
        name: name,
        message: message
      };
    }
    
    // ===================================
    // EVENT HANDLERS
    // ===================================
    
    /**
     * Validates form inputs and returns the values if valid
     * @returns {Object|null} - Object with name and message, or null if invalid
     */
    function validateAndGetFormValues() {
      const nameInput = document.getElementById('name-input');
      const messageInput = document.getElementById('message-input');
      const nameGroup = document.getElementById('name-group');
      
      const name = nameInput.value;
      const message = messageInput.value;
      
      // Validate name input
      if (!validateNameInput(name)) {
        // Show error state
        nameGroup.classList.add('error');
        nameInput.focus();
        return null;
      }
      
      // Remove error state if validation passes
      nameGroup.classList.remove('error');
      
      return {
        name: name.trim(),
        message: message.trim()
      };
    }
    
    /**
     * Handles Generate Link button click
     * Generates and displays the shareable link without showing the preview
     */
    function handleGenerateLinkClick() {
      const formValues = validateAndGetFormValues();
      
      if (!formValues) {
        return; // Validation failed
      }
      
      // Store values
      recipientName = formValues.name;
      customMessage = formValues.message;
      
      // Generate the share URL
      const shareURL = generateShareURL(recipientName, customMessage);
      
      // Display the link section
      const linkSection = document.getElementById('link-section');
      const generatedLinkInput = document.getElementById('generated-link');
      
      generatedLinkInput.value = shareURL;
      linkSection.classList.remove('hidden');
      
      // Scroll to the link section smoothly
      linkSection.scrollIntoView({ behavior: 'smooth', block: 'nearest' });
      
      // Store the share URL for copy and WhatsApp functions
      window.currentGeneratedURL = shareURL;
    }
    
    /**
     * Handles form submission with validation
     * @param {Event} event - The form submit event
     */
    function handleFormSubmit(event) {
      // Prevent default form submission
      event.preventDefault();
      
      const formValues = validateAndGetFormValues();
      
      if (!formValues) {
        return; // Validation failed
      }
      
      // Store name and message in global variables for later use
      recipientName = formValues.name;
      customMessage = formValues.message;
      
      // Transition to countdown screen
      transitionToCountdown();
    }
    
    /**
     * Transitions from input screen to countdown screen
     */
    function transitionToCountdown() {
      // Hide input screen
      const inputScreen = document.getElementById('input-screen');
      inputScreen.classList.remove('active');
      
      // Show countdown screen
      const countdownScreen = document.getElementById('countdown-screen');
      countdownScreen.classList.add('active');
      
      // Start countdown animation
      startCountdown();
    }
    
    /**
     * Starts the countdown animation from 3 to 1
     * Displays each number for approximately 1 second
     * Transitions to reveal screen when countdown completes
     * Disables user interaction during countdown
     */
    function startCountdown() {
      const countdownElement = document.getElementById('countdown-number');
      const countdownScreen = document.getElementById('countdown-screen');
      
      // Disable user interaction during countdown
      countdownScreen.style.pointerEvents = 'none';
      
      // Countdown sequence: 3, 2, 1
      let currentNumber = 3;
      
      // Display initial number (3)
      countdownElement.textContent = currentNumber;
      
      // Use setTimeout to display each number for ~1 second
      // Display "2" after 1 second
      setTimeout(() => {
        currentNumber = 2;
        countdownElement.textContent = currentNumber;
        // Re-trigger animation by removing and re-adding the element
        countdownElement.style.animation = 'none';
        // Force reflow to restart animation
        void countdownElement.offsetWidth;
        countdownElement.style.animation = 'countdown-pulse 1s ease-in-out';
      }, 1000);
      
      // Display "1" after 2 seconds
      setTimeout(() => {
        currentNumber = 1;
        countdownElement.textContent = currentNumber;
        // Re-trigger animation
        countdownElement.style.animation = 'none';
        void countdownElement.offsetWidth;
        countdownElement.style.animation = 'countdown-pulse 1s ease-in-out';
      }, 2000);
      
      // Transition to reveal screen after 3 seconds (when countdown completes)
      setTimeout(() => {
        transitionToReveal();
      }, 3000);
    }
    
    /**
     * Reveals text character by character with a typewriter effect
     * @param {HTMLElement} element - The DOM element to display the text in
     * @param {string} text - The text to reveal character by character
     * @param {number} speed - The delay in milliseconds between each character (default: 60ms)
     * @returns {Promise} - Resolves when the typewriter effect completes
     */
    function typewriterEffect(element, text, speed = 60) {
      return new Promise((resolve) => {
        // Clear any existing content in the element
        element.textContent = '';
        
        // Track the current character index
        let charIndex = 0;
        
        /**
         * Reveals the next character in the sequence
         */
        function revealNextChar() {
          // Check if we've revealed all characters
          if (charIndex < text.length) {
            // Add the next character to the element
            element.textContent += text.charAt(charIndex);
            charIndex++;
            
            // Schedule the next character reveal
            setTimeout(revealNextChar, speed);
          } else {
            // All characters revealed - resolve the promise
            resolve();
          }
        }
        
        // Start revealing characters
        revealNextChar();
      });
    }
    
    /**
     * Transitions from countdown screen to reveal screen
     * Displays the recipient's name and message with typewriter effect
     */
    function transitionToReveal() {
      // Hide countdown screen
      const countdownScreen = document.getElementById('countdown-screen');
      countdownScreen.classList.remove('active');
      
      // Re-enable user interaction
      countdownScreen.style.pointerEvents = 'auto';
      
      // Show reveal screen
      const revealScreen = document.getElementById('reveal-screen');
      revealScreen.classList.add('active');
      
      // Display the personalized message with typewriter effect
      showReveal(recipientName, customMessage);
    }
    
    /**
     * Displays the personalized Valentine message with typewriter effect
     * @param {string} name - The recipient's name
     * @param {string} customMsg - The custom message (can be empty)
     */
    async function showReveal(name, customMsg) {
      // Get DOM elements
      const nameElement = document.getElementById('recipient-name');
      const messageElement = document.getElementById('valentine-message');
      const questionSection = document.getElementById('question-section');
      
      // Start visual effects immediately when reveal screen is displayed
      // Effects have lower z-index (5) than message container (10) to not obstruct text
      createFloatingHearts();
      createConfetti();
      
      // Display the recipient's name immediately (no typewriter effect for name)
      // Use textContent to prevent XSS attacks (not innerHTML)
      nameElement.textContent = name;
      
      // Determine which message to display
      let messageToDisplay;
      
      if (customMsg && customMsg.length > 0) {
        // Use custom message if provided
        messageToDisplay = customMsg;
      } else {
        // Use default romantic message if no custom message
        messageToDisplay = "You make my heart skip a beat! ðŸ’• Every moment with you is special, and I can't imagine my life without you. Will you be my Valentine?";
      }
      
      // Apply typewriter effect to the message
      // typewriterEffect uses textContent internally for XSS prevention
      await typewriterEffect(messageElement, messageToDisplay, 60);
      
      // Show the question section after typewriter effect completes
      questionSection.classList.remove('hidden');
    }
    
    /**
     * Creates floating heart animations on the screen
     * Generates 20-30 hearts at random positions that float upward and fade out
     * Hearts are automatically removed after animation completes
     */
    function createFloatingHearts() {
      // Limit to 20-30 hearts for performance
      const numberOfHearts = 25;
      
      // Heart emoji variations for visual variety
      const heartEmojis = ['â¤ï¸', 'ðŸ’•', 'ðŸ’–', 'ðŸ’—', 'ðŸ’“', 'ðŸ’'];
      
      // Create hearts at intervals to avoid all appearing at once
      let heartsCreated = 0;
      
      const heartInterval = setInterval(() => {
        if (heartsCreated >= numberOfHearts) {
          clearInterval(heartInterval);
          return;
        }
        
        // Create a new heart element
        const heart = document.createElement('div');
        heart.className = 'floating-heart';
        
        // Use a random heart emoji
        heart.textContent = heartEmojis[Math.floor(Math.random() * heartEmojis.length)];
        
        // Position heart at random horizontal position
        // Keep hearts within viewport bounds (0% to 95% to account for heart width)
        const randomX = Math.random() * 95;
        heart.style.left = `${randomX}%`;
        
        // Start hearts from bottom of screen
        heart.style.bottom = '0';
        
        // Add slight random delay to animation for more natural effect
        const randomDelay = Math.random() * 0.5;
        heart.style.animationDelay = `${randomDelay}s`;
        
        // Add heart to the document
        document.body.appendChild(heart);
        
        // Remove heart element after animation completes (4s + delay)
        setTimeout(() => {
          heart.remove();
        }, (4 + randomDelay) * 1000);
        
        heartsCreated++;
      }, 200); // Create a new heart every 200ms
    }
    
    /**
     * Creates confetti animation on the screen
     * Generates confetti particles with random colors that fall from the top
     * Confetti particles rotate as they fall and are automatically removed after animation completes
     */
    function createConfetti() {
      // Limit to 30 confetti pieces for performance
      const numberOfConfetti = 30;
      
      // Confetti color palette - romantic colors
      const confettiColors = [
        '#ff6b9d', // Soft pink
        '#c44569', // Deep rose
        '#ffa07a', // Light coral
        '#ff85a2', // Light pink
        '#ffb6c1', // Lighter pink
        '#ff1493', // Deep pink
        '#ff69b4', // Hot pink
        '#ffd700', // Gold
      ];
      
      // Create confetti at intervals to avoid all appearing at once
      let confettiCreated = 0;
      
      const confettiInterval = setInterval(() => {
        if (confettiCreated >= numberOfConfetti) {
          clearInterval(confettiInterval);
          return;
        }
        
        // Create a new confetti element
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        
        // Use a random color from the palette
        const randomColor = confettiColors[Math.floor(Math.random() * confettiColors.length)];
        confetti.style.backgroundColor = randomColor;
        
        // Position confetti at random horizontal position
        // Keep confetti within viewport bounds (0% to 100%)
        const randomX = Math.random() * 100;
        confetti.style.left = `${randomX}%`;
        
        // Start confetti from top of screen
        confetti.style.top = '-10px';
        
        // Add slight random delay to animation for more natural effect
        const randomDelay = Math.random() * 0.3;
        confetti.style.animationDelay = `${randomDelay}s`;
        
        // Randomize confetti size slightly for variety
        const randomSize = 8 + Math.random() * 6; // 8-14px
        confetti.style.width = `${randomSize}px`;
        confetti.style.height = `${randomSize}px`;
        
        // Add confetti to the document
        document.body.appendChild(confetti);
        
        // Remove confetti element after animation completes (3s + delay)
        setTimeout(() => {
          confetti.remove();
        }, (3 + randomDelay) * 1000);
        
        confettiCreated++;
      }, 100); // Create a new confetti piece every 100ms
    }
    
    /**
     * Removes error state when user starts typing
     */
    function handleNameInput() {
      const nameGroup = document.getElementById('name-group');
      nameGroup.classList.remove('error');
    }
    
    /**
     * Handles Yes button click
     * Displays success message/animation and shows share options
     */
    function handleYesClick() {
      // Hide the question section (buttons)
      const questionSection = document.getElementById('question-section');
      questionSection.classList.add('hidden');
      
      // Show success message with animation
      const successSection = document.getElementById('success-section');
      successSection.classList.remove('hidden');
      
      // Show share options section
      const shareSection = document.getElementById('share-section');
      shareSection.classList.remove('hidden');
      
      // Generate the share URL for the current Valentine message
      const shareURL = generateShareURL(recipientName, customMessage);
      
      // Store the share URL for use in copy and WhatsApp functions
      window.currentShareURL = shareURL;
    }
    
    /**
     * Calculates a random position for the evasive No button
     * Ensures the button stays within viewport boundaries
     * @param {number} buttonWidth - The width of the button in pixels
     * @param {number} buttonHeight - The height of the button in pixels
     * @param {number} viewportWidth - The width of the viewport in pixels
     * @param {number} viewportHeight - The height of the viewport in pixels
     * @returns {Object} - Object with x and y coordinates in pixels
     */
    function getRandomPosition(buttonWidth, buttonHeight, viewportWidth, viewportHeight) {
      // Calculate maximum x and y positions to keep button fully visible
      // x must be between 0 and (viewportWidth - buttonWidth)
      // y must be between 0 and (viewportHeight - buttonHeight)
      const maxX = viewportWidth - buttonWidth;
      const maxY = viewportHeight - buttonHeight;
      
      // Ensure maxX and maxY are not negative (in case button is larger than viewport)
      const safeMaxX = Math.max(0, maxX);
      const safeMaxY = Math.max(0, maxY);
      
      // Generate random position within safe boundaries
      const x = Math.random() * safeMaxX;
      const y = Math.random() * safeMaxY;
      
      return { x, y };
    }
    
    /**
     * Handles No button hover/touch interaction
     * Moves the button to a new random position on the screen
     * @param {Event} event - The mouseenter or touchstart event
     */
    function handleNoButtonHover(event) {
      // Prevent default touch behavior to avoid triggering click
      if (event.type === 'touchstart') {
        event.preventDefault();
        // Also stop event propagation to prevent any parent handlers
        event.stopPropagation();
      }
      
      // Get the No button element
      const noBtn = document.getElementById('no-btn');
      
      // Get button dimensions
      const buttonRect = noBtn.getBoundingClientRect();
      const buttonWidth = buttonRect.width;
      const buttonHeight = buttonRect.height;
      
      // Get viewport dimensions
      const viewportWidth = window.innerWidth;
      const viewportHeight = window.innerHeight;
      
      // Calculate new random position
      const newPosition = getRandomPosition(buttonWidth, buttonHeight, viewportWidth, viewportHeight);
      
      // Move button to new position using fixed positioning
      // First, ensure the button is positioned absolutely or fixed
      noBtn.style.position = 'fixed';
      noBtn.style.left = `${newPosition.x}px`;
      noBtn.style.top = `${newPosition.y}px`;
      
      // Add a subtle animation for smoother movement
      noBtn.style.transition = 'left 0.3s ease, top 0.3s ease';
    }
    
    /**
     * Handles No button focus (keyboard navigation)
     * Moves the button when it receives keyboard focus
     * @param {Event} event - The focus event
     */
    function handleNoButtonFocus(event) {
      // Move the button when it receives focus via keyboard
      handleNoButtonHover(event);
    }
    
    /**
     * Handles Copy Generated Link button click
     * Copies the generated share URL to clipboard
     */
    function handleCopyGeneratedLinkClick() {
      const shareURL = window.currentGeneratedURL;
      const confirmationElement = document.getElementById('copy-generated-confirmation');
      
      if (shareURL) {
        copyToClipboardWithConfirmation(shareURL, confirmationElement);
      }
    }
    
    /**
     * Handles WhatsApp Generated button click
     * Opens WhatsApp with the generated share URL
     */
    function handleWhatsAppGeneratedClick() {
      const shareURL = window.currentGeneratedURL;
      
      if (shareURL) {
        shareOnWhatsApp(shareURL);
      }
    }
    
    /**
     * Copies text to the clipboard and shows confirmation in specified element
     * @param {string} text - The text to copy to clipboard
     * @param {HTMLElement} confirmationElement - The element to show confirmation in
     */
    async function copyToClipboardWithConfirmation(text, confirmationElement) {
      try {
        // Check if Clipboard API is supported
        if (navigator.clipboard && navigator.clipboard.writeText) {
          // Use modern Clipboard API
          await navigator.clipboard.writeText(text);
          
          // Show confirmation message
          confirmationElement.classList.remove('hidden');
          
          // Hide confirmation message after 2 seconds
          setTimeout(() => {
            confirmationElement.classList.add('hidden');
          }, 2000);
        } else {
          // Fallback for browsers without Clipboard API
          const textarea = document.createElement('textarea');
          textarea.value = text;
          textarea.style.position = 'fixed';
          textarea.style.left = '-9999px';
          textarea.style.top = '0';
          textarea.setAttribute('readonly', '');
          
          document.body.appendChild(textarea);
          textarea.select();
          textarea.setSelectionRange(0, text.length);
          
          const successful = document.execCommand('copy');
          document.body.removeChild(textarea);
          
          if (successful) {
            confirmationElement.classList.remove('hidden');
            setTimeout(() => {
              confirmationElement.classList.add('hidden');
            }, 2000);
          } else {
            confirmationElement.textContent = 'âŒ Please copy the link manually';
            confirmationElement.style.color = 'var(--color-error)';
            confirmationElement.classList.remove('hidden');
            
            setTimeout(() => {
              confirmationElement.classList.add('hidden');
              confirmationElement.textContent = 'âœ“ Link copied to clipboard!';
              confirmationElement.style.color = 'var(--color-success)';
            }, 3000);
          }
        }
      } catch (error) {
        console.error('Failed to copy to clipboard:', error);
        confirmationElement.textContent = 'âŒ Failed to copy. Please try again.';
        confirmationElement.style.color = 'var(--color-error)';
        confirmationElement.classList.remove('hidden');
        
        setTimeout(() => {
          confirmationElement.classList.add('hidden');
          confirmationElement.textContent = 'âœ“ Link copied to clipboard!';
          confirmationElement.style.color = 'var(--color-success)';
        }, 3000);
      }
    }
    
    /**
     * Copies text to the clipboard using the Clipboard API
     * Shows confirmation message after successful copy
     * Implements fallback for browsers without Clipboard API support
     * @param {string} text - The text to copy to clipboard
     */
    async function copyToClipboard(text) {
      const confirmationElement = document.getElementById('copy-confirmation');
      await copyToClipboardWithConfirmation(text, confirmationElement);
    }
    
    /**
     * Handles Copy Link button click
     * Copies the share URL to clipboard
     */
    function handleCopyLinkClick() {
      // Get the share URL that was generated when Yes button was clicked
      const shareURL = window.currentShareURL;
      
      if (shareURL) {
        copyToClipboard(shareURL);
      }
    }
    
    /**
     * Opens WhatsApp with the share link pre-filled
     * Uses web.whatsapp.com for desktop and wa.me for mobile
     * @param {string} shareURL - The URL to share via WhatsApp
     */
    function shareOnWhatsApp(shareURL) {
      // Create the message text to share
      const messageText = `ðŸ’• I have a special Valentine message for you! ${shareURL}`;
      
      // Encode the message for URL
      const encodedMessage = encodeURIComponent(messageText);
      
      // Detect if user is on mobile device
      // Check for common mobile user agent patterns
      const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);
      
      // Generate appropriate WhatsApp URL based on device type
      let whatsappURL;
      
      if (isMobile) {
        // Mobile: Use wa.me URL (works on mobile apps)
        whatsappURL = `https://wa.me/?text=${encodedMessage}`;
      } else {
        // Desktop: Use web.whatsapp.com (opens WhatsApp Web)
        whatsappURL = `https://web.whatsapp.com/send?text=${encodedMessage}`;
      }
      
      // Open WhatsApp in a new window/tab
      window.open(whatsappURL, '_blank');
    }
    
    /**
     * Handles WhatsApp button click
     * Opens WhatsApp with the share URL
     */
    function handleWhatsAppClick() {
      // Get the share URL that was generated when Yes button was clicked
      const shareURL = window.currentShareURL;
      
      if (shareURL) {
        shareOnWhatsApp(shareURL);
      }
    }
    
    // ===================================
    // INITIALIZATION
    // ===================================
    
    /**
     * Initializes the app on page load
     * Checks for URL parameters and determines which screen to show
     */
    function initializeApp() {
      // Parse URL parameters
      const urlParams = parseURLParams();
      
      // Check if valid parameters exist (name must be non-empty)
      if (urlParams.name && validateNameInput(urlParams.name)) {
        // Valid parameters found - skip input form and go to countdown
        recipientName = urlParams.name.trim();
        customMessage = urlParams.message.trim();
        
        // Hide input screen and show countdown screen
        const inputScreen = document.getElementById('input-screen');
        inputScreen.classList.remove('active');
        
        const countdownScreen = document.getElementById('countdown-screen');
        countdownScreen.classList.add('active');
        
        // Start countdown animation
        startCountdown();
      } else {
        // No valid parameters - show input form (default state)
        // Input screen is already active by default in HTML
        // No action needed here
      }
    }
    
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize the app (check URL parameters)
      initializeApp();
      
      // Bind form submit event
      const form = document.getElementById('valentine-form');
      form.addEventListener('submit', handleFormSubmit);
      
      // Bind Generate Link button click event
      const generateLinkBtn = document.getElementById('generate-link-btn');
      generateLinkBtn.addEventListener('click', handleGenerateLinkClick);
      
      // Bind input event to clear error on typing
      const nameInput = document.getElementById('name-input');
      nameInput.addEventListener('input', handleNameInput);
      
      // Bind Yes button click event
      const yesBtn = document.getElementById('yes-btn');
      yesBtn.addEventListener('click', handleYesClick);
      
      // Bind No button evasive behavior
      // Desktop: mouseenter event (triggers when mouse enters button area)
      // Mobile: touchstart event (triggers when finger touches button)
      // Keyboard: focus event (triggers when button receives keyboard focus)
      const noBtn = document.getElementById('no-btn');
      noBtn.addEventListener('mouseenter', handleNoButtonHover);
      // Note: touchstart must NOT be passive because we call preventDefault
      noBtn.addEventListener('touchstart', handleNoButtonHover, { passive: false });
      noBtn.addEventListener('focus', handleNoButtonFocus);
      
      // Bind Copy Link button click event (in reveal screen)
      const copyLinkBtn = document.getElementById('copy-link-btn');
      copyLinkBtn.addEventListener('click', handleCopyLinkClick);
      
      // Bind WhatsApp button click event (in reveal screen)
      const whatsappBtn = document.getElementById('whatsapp-btn');
      whatsappBtn.addEventListener('click', handleWhatsAppClick);
      
      // Bind Copy Generated Link button click event (in input screen)
      const copyGeneratedLinkBtn = document.getElementById('copy-generated-link-btn');
      copyGeneratedLinkBtn.addEventListener('click', handleCopyGeneratedLinkClick);
      
      // Bind WhatsApp Generated button click event (in input screen)
      const whatsappGeneratedBtn = document.getElementById('whatsapp-generated-btn');
      whatsappGeneratedBtn.addEventListener('click', handleWhatsAppGeneratedClick);
    });
  </script>
  
</body>
</html>
